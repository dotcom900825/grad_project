/*!
 * jQuery extends for customize
 * 
 * @author lovemoon@yeah.net
 * @sice 2011-07-16
 */
jQuery.noConflict();(function(){var a=null;jQuery.extend({jsContainer:function(){if(a===null){a=jQuery("#jsContainer");if(a.size()===0){a=jQuery('<div id="jsContainer" />').prependTo("body")}}return a},extendClass:function(d,b){var c=function(){};c.prototype=b.prototype;d.prototype=new c();d.prototype.constructor=d;d.superClass=b.prototype;if(b.prototype.constructor===Object.prototype.constructor){b.prototype.constructor=b}}})})();function EventDispatcher(){this.listeners={}}EventDispatcher.prototype={constructor:EventDispatcher,addEventListener:function(c,d){if(typeof this.listeners[c]=="undefined"){this.listeners[c]=[]}var b=this.listeners[c];var a=0;for(a=0;a<b.length;a++){if(b[a]===d){return}}this.listeners[c].push(d)},dispatchEvent:function(d){if(typeof d=="string"){d={type:d}}if(!d.target){d.target=this}if(!d.type){throw new Error("Event object missing 'type' property.")}if(this.listeners[d.type] instanceof Array){var c=this.listeners[d.type];for(var b=0,a=c.length;b<a;b++){c[b].apply(this,arguments)}}},removeEventListener:function(d,e){if(this.listeners[d] instanceof Array){var c=this.listeners[d];for(var b=0,a=c.length;b<a;b++){if(c[b]===e){c.splice(b,1);break}}}}};var CachePriority={Low:1,Normal:2,High:4};function Cache(a){this.items={};this.count=0;this.maxSize=a||-1;this.fillFactor=0.75;this.purgeSize=Math.round(this.maxSize*this.fillFactor);this.stats={};this.stats.hits=0;this.stats.misses=0}Cache.prototype.getItem=function(a){var c=this.items[a];if(c!=null){if(!this._isExpired(c)){c.lastAccessed=new Date().getTime()}else{this.removeItem(a);c=null}}var b=null;if(c!=null){b=c.value;this.stats.hits++}else{this.stats.misses++}return b};Cache.prototype.setItem=function(c,d,b){function a(f,e,g){if((f==null)||(f=="")){throw new Error("key cannot be null or empty")}this.key=f;this.value=e;if(g==null){g={}}if(g.expirationAbsolute!=null){g.expirationAbsolute=g.expirationAbsolute.getTime()}if(g.priority==null){g.priority=CachePriority.Normal}this.options=g;this.lastAccessed=new Date().getTime()}if(this.items[c]!=null){this.removeItem(c)}this.addItem(new a(c,d,b));if((this.maxSize>0)&&(this.count>this.maxSize)){this.purge()}};Cache.prototype.clear=function(){for(var a in this.items){this.removeItem(a)}};Cache.prototype.purge=function(){var d=new Array();for(var a in this.items){var b=this.items[a];if(this._isExpired(b)){this.removeItem(a)}else{d.push(b)}}if(d.length>this.purgeSize){d=d.sort(function(f,e){if(f.options.priority!=e.options.priority){return e.options.priority-f.options.priority}else{return e.lastAccessed-f.lastAccessed}});while(d.length>this.purgeSize){var c=d.pop();this.removeItem(c.key)}}};Cache.prototype.addItem=function(a){this.items[a.key]=a;this.count++};Cache.prototype.removeItem=function(a){var b=this.items[a];delete this.items[a];this.count--;if(b.options.callback!=null){var c=function(){b.options.callback(b.key,b.value)};setTimeout(c,0)}};Cache.prototype._isExpired=function(c){var a=new Date().getTime();var b=false;if((c.options.expirationAbsolute)&&(c.options.expirationAbsolute<a)){b=true}if(!b&&(c.options.expirationSliding)){var d=c.lastAccessed+(c.options.expirationSliding*1000);if(d<a){b=true}}return b};(function(){var a=new Cache(50);window.jc=function(b){var c=a.getItem(b);if(c==null){c=jQuery(b);a.setItem(b,c)}return c}})();jQuery(function(){function a(){this.userData=null;this.name=location.hostname;if(!this.userData){try{this.userData=document.createElement("input");this.userData.type="hidden";this.userData.style.display="none";this.userData.addBehavior("#default#userData");jQuery.jsContainer().append(this.userData);var b=new Date();b.setDate(b.getDate()+365);this.userData.expires=b.toUTCString()}catch(c){}}}a.prototype={setItem:function(b,c){this.userData.load(this.name);this.userData.setAttribute(b,c);this.userData.save(this.name)},getItem:function(b){this.userData.load(this.name);return this.userData.getAttribute(b)},removeItem:function(b){this.userData.load(this.name);this.userData.removeAttribute(b);this.userData.save(this.name)},clear:function(){this.userData.load(this.name);var b=this.userData.attributes;for(var d=0;d<b.length;d++){var c=b[d].name;if(c!="type"&&c!="style"){this.userData.removeAttribute(c)}}this.userData.save(this.name)}};if(!window.localStorage){window.localStorage=new a()}});var JSON=JSON||{};(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();(function(){var b=["DOMMouseScroll","mousewheel"];if(jQuery.event.fixHooks){for(var a=b.length;a;){jQuery.event.fixHooks[b[--a]]=jQuery.event.mouseHooks}}jQuery.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var d=b.length;d;){this.addEventListener(b[--d],c,false)}}else{this.onmousewheel=c}},teardown:function(){if(this.removeEventListener){for(var d=b.length;d;){this.removeEventListener(b[--d],c,false)}}else{this.onmousewheel=null}}};jQuery.fn.extend({mousewheel:function(d){return d?this.bind("mousewheel",d):this.trigger("mousewheel")},unmousewheel:function(d){return this.unbind("mousewheel",d)}});function c(j){var g=j||window.event,f=[].slice.call(arguments,1),k=0,h=true,e=0,d=0;j=jQuery.event.fix(g);j.type="mousewheel";if(g.wheelDelta){k=g.wheelDelta/120}if(g.detail){k=-g.detail/3}d=k;if(g.axis!==undefined&&g.axis===g.HORIZONTAL_AXIS){d=0;e=-1*k}if(g.wheelDeltaY!==undefined){d=g.wheelDeltaY/120}if(g.wheelDeltaX!==undefined){e=-1*g.wheelDeltaX/120}f.unshift(j,k,e,d);return(jQuery.event.dispatch||jQuery.event.handle).apply(this,f)}})(jQuery);jQuery.extend({cookie:function(b,f,m){if(typeof f!="undefined"){m=m||{};if(f===null){f="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var g;if(typeof m.expires=="number"){g=new Date();g.setTime(g.getTime()+(m.expires*24*60*60*1000))}else{g=m.expires}e="; expires="+g.toUTCString()}var l=m.path?"; path="+(m.path):"";var h=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(f),e,l,h,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var j=0;j<k.length;j++){var c=jQuery.trim(k[j]);if(c.substring(0,b.length)==b){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}},paramOfUrl:function(b){b=b||location.href;var a=b.substring(b.indexOf("?")+1).split("&");var e={};for(var d=0;d<a.length;d++){var g=a[d].split("=");if(g.length==2){var c=decodeURIComponent(g[0]);var f=decodeURIComponent(g[1]);if(e.hasOwnProperty(c)){e[c]=jQuery.makeArray(e[c]);e[c].push(f)}else{e[c]=f}}}return e},hasFlash:function(){var a=false;if(navigator.plugins&&navigator.plugins.length>0){var b=navigator.plugins["Shockwave Flash"];if(b){a=true}}else{if(window.ActiveXObject){var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(b){a=true}}}return a},isAppleTerminal:function(){return/(iPhone|iPad|iPod)/i.test(navigator.userAgent)},scrollTween:function(b,a){jQuery.use("easing",function(){jQuery("html, body").animate({scrollTop:(b||0)},500,"easeOutExpo",function(){return a&&a()})})}});(function(){jQuery.support.fixed=false;jQuery(function(){var a=document.createElement("div");a.style.cssText="position:fixed;top:10px;visibility:hidden;";jQuery.jsContainer().prepend(a);jQuery.support.fixed=jQuery(a).offset().top==jQuery(document).scrollTop()+10;jQuery(a).remove()})})();(function(){var a={element:null,getMaskLayer:function(){if(this.element===null){this.element=jQuery("#maskLayer");if(this.element.size()==0){this.element=jQuery('<div id="maskLayer"><iframe frameBorder="0" class="hackflash" width="100%" height="100%"></iframe><div class="maskpanel"></div></div>').appendTo(jQuery.jsContainer())}this.bindEvent()}return this.element},show:function(){if(!this.isVisible()){this.getMaskLayer().css({width:jQuery("body").width(),height:jQuery(document).height(),display:"block"})}},hide:function(){this.getMaskLayer().css({display:"none"})},bindEvent:function(){var b=this;jQuery(window).resize(function(){if(b.isVisible()){b.hide();b.show()}})},isVisible:function(){return this.getMaskLayer().is(":visible")}};jQuery.showMask=jQuery.proxy(a,"show");jQuery.hideMask=jQuery.proxy(a,"hide")})();var DialogEvent={SHOW:"show",HIDE:"hide",CLOSE:"close"};(function(){function b(g){b.superClass.constructor.call(this);var f={width:400,height:"auto",message:"",fixed:true,denyEsc:false,nopadding:false,top:null,left:null,modal:false,visible:true,drag:false,pattern:null};jQuery.extend(this,f,g);this.resizeListener=function(j){var h=j.data.dialog;if(h.isVisible()&&h.left===null){h.setPosition()}};this.hideListener=function(h){if(h.keyCode==27&&h.data.dialog.isVisible()){h.data.dialog.hide()}};this.init()}jQuery.extendClass(b,EventDispatcher);jQuery.extend(b.prototype,{init:function(){this.getTemplate().appendTo(jQuery.jsContainer());this.bindEvent();if(this.visible!==false){this.show()}},show:function(){if(this.modal===true){jQuery.showMask()}this.setPosition();this.element.show();this.dispatchEvent(DialogEvent.SHOW)},hide:function(){this.element.hide();jQuery.hideMask();this.dispatchEvent(DialogEvent.HIDE)},remove:function(f){if(f!==true){jQuery.hideMask()}this.element.remove();this.unbindEvent();var g=this;delete g;this.dispatchEvent(DialogEvent.CLOSE)},isVisible:function(){return this.getTemplate().is(":visible")},bindEvent:function(){jQuery(window).resize({dialog:this},this.resizeListener);if(this.denyEsc!==true){jQuery(document).keydown({dialog:this},this.hideListener)}},unbindEvent:function(){jQuery(window).unbind("resize",this.resizeListener);jQuery(window).unbind("scroll",this.resizeListener);jQuery(document).unbind("keydown",this.hideListener)},getTemplate:function(){if(this.element==null){this.element=jQuery(['<div class="dialog '+(this.pattern||"")+'"'+(this.visible===false?' style="display:none;"':"")+">",'<iframe frameBorder="0" class="hackflash" width="100%" height="100%"></iframe><div class="effect"></div>','<div class="dialog_container">','<table width="100%">',"<tbody>",'<tr><td class="dml"></td>','<td class="dmm">','<div class="dialog_body">','<div class="dialog_content'+(this.nopadding?" nopadding":"")+'"></div>',"</div>","</td>",'<td class="dmr"></td></tr>',"</tbody>","</table>","</div>","</div>"].join(""));this.element.css({width:this.width,height:this.height});if(jQuery.support.fixed&&this.fixed){this.element.css({position:"fixed"})}this.element.find(".dialog_content").append(this.message)}return this.element},getBody:function(){return this.element.find(".dialog_content")},setPosition:function(f){var h=this.left||null;var g=this.top||null;if(f){if(f.left!==undefined){h=f.left}if(f.top!==undefined){g=f.top}}if(g===null){g=(jQuery(window).height()-this.element.height())/2;if(!jQuery.support.fixed||!this.fixed){g+=jQuery(document).scrollTop()}g=Math.max(g,0)}if(h===null){h=(jQuery(window).width()-this.width)/2;if(!jQuery.support.fixed||!this.fixed){h+=jQuery(document).scrollLeft()}h=Math.max(h,0)}this.getTemplate().css({top:g,left:h})},setWidth:function(f){this.element.css("width",f)}});var a={dialog:null,regist:function(g){if(this.dialog!=null){var f=false;if(g.modal===true){f=true}this.destroy(f)}this.dialog=g},dequeue:function(f){if(f==this.dialog){this.dialog=null}},destroy:function(f){this.dialog.remove(f)}};var d=function(g){var f={title:"提示",confirmText:"确定",detached:false,noHeader:false,noFooter:false,hideHeader:false,hideFooter:false,callback:function(){return true}};d.superClass.constructor.call(this,jQuery.extend({},f,g));this.getButton("confirm").focus();if(this.detached!==true){a.regist(this)}};jQuery.extendClass(d,b);jQuery.extend(d.prototype,{getHeader:function(){return this.element.find(".dialog_header")},getFooter:function(){return this.element.find(".dialog_footer")},getButton:function(f){if(f=="confirm"){return this.getFooter().find(".confirm")}else{if(f=="close"){return this.getHeader().find(".close")}}return null},getTemplate:function(){if(this.element==null){d.superClass.getTemplate.call(this);this.element.addClass("alert-dialog");if(this.noHeader!==true){if(/<\/\w+>/.test(this.title)==false){this.title="<h3>"+this.title+"</h3>"}this.element.find(".dialog_body").prepend('<div class="dialog_header clearfix">'+this.title+'<a class="close">关闭</a></div>')}if(this.noFooter!==true){this.element.find(".dialog_body").append('<div class="dialog_footer"><input type="submit" class="confirm" value="'+this.confirmText+'" /></div>')}if(this.hideHeader===true){this.element.find(".dialog_body .dialog_header").hide()}if(this.hideFooter===true){this.element.find(".dialog_body .dialog_footer").hide()}}return this.element},bindEvent:function(){d.superClass.bindEvent.call(this);var f=this;this.getButton("confirm").click(function(g){if(f.callback.call(f)===true){f.hide()}g.preventDefault()});this.getButton("close").click(function(g){f.hide();g.preventDefault()})}});function c(g){var f={cancelText:"取消"};c.superClass.constructor.call(this,jQuery.extend({},f,g))}jQuery.extendClass(c,d);jQuery.extend(c.prototype,{getButton:function(f){if(f=="cancel"){return this.getFooter().find(".cancel")}return c.superClass.getButton.call(this,f)},getTemplate:function(){if(this.element==null){c.superClass.getTemplate.call(this);this.element.addClass("confirm-dialog");this.getFooter().append('<input type="button" class="cancel" value="'+this.cancelText+'" />')}return this.element},bindEvent:function(){c.superClass.bindEvent.call(this);var f=this;this.getButton("cancel").click(function(g){f.hide();g.preventDefault()})}});var e=function(g){var f={width:200,modal:false,detached:false,time:2500};e.superClass.constructor.call(this,jQuery.extend({},f,g));if(this.detached!==true){a.regist(this)}};jQuery.extendClass(e,b);jQuery.extend(e.prototype,{getTemplate:function(){if(this.element==null){e.superClass.getTemplate.call(this);this.element.addClass("message-dialog");this.getBody().addClass("center")}return this.element},bindEvent:function(){e.superClass.bindEvent.call(this);var f=this;this.timer=setTimeout(function(){f.hide()},this.time)},unbindEvent:function(){e.superClass.unbindEvent.call(this);clearTimeout(this.timer)}});jQuery.extend({dialog:function(f){if(f.constructor!=Object){f={message:f}}return new b(f)},alert:function(f){if(f.constructor!=Object){f={message:f}}return new d(f)},confirm:function(f){if(f.constructor!=Object){f={message:f}}return new c(f)},message:function(f){if(f.constructor!=Object){f={message:f}}return new e(f)}})})();jQuery.fn.extend({insertAtCaret:function(c){var f=jQuery(this)[0];if(document.selection){this.focus();var d=document.selection.createRange();d.text=c;this.focus()}else{if(f.selectionStart||f.selectionStart==0){var b=f.selectionStart;var a=f.selectionEnd;var e=f.scrollTop;f.value=f.value.substring(0,b)+c+f.value.substring(a,f.value.length);this.focus();f.selectionStart=b+c.length;f.selectionEnd=b+c.length;f.scrollTop=e}else{this.value+=c;this.focus()}}return this},getCaret:function(){var c=jQuery(this)[0];var a=0;if(document.selection){c.focus();var b=document.selection.createRange();b.moveStart("character",-c.value.length);a=b.text.length}else{if(c.selectionStart||c.selectionStart=="0"){a=c.selectionStart}}return a},setCaret:function(a){return jQuery.each(this,function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(a,a)}else{if(this.createTextRange){var b=this.createTextRange();b.collapse(true);b.moveEnd("character",a);b.moveStart("character",a);b.select()}}})},quickSubmit:function(a){jQuery(this).keydown(function(d){if(!d.shiftKey&&!d.altKey&&d.ctrlKey&&d.keyCode==13){var c=jQuery(d.target);var b=c.is("form")?c:c[0].form;if(a===true){jQuery(b).triggerHandler("submit")}else{jQuery(b).trigger("submit")}}});return this},limitLength:function(a,b,e){var d=function(j){var h=0;for(var g=0,f=j.length;g<f;g++){if(j.charCodeAt(g)>255){h+=1}else{h+=0.5}}return Math.ceil(h)};var c=function(j){var h=0,j=j||"";for(var g=0,f=j.length;g<f;g++){if(j.charCodeAt(g)>255){h+=1}else{h+=0.5}if(h>a){return j.substring(0,g)}}return j};return this.each(function(){var h=jQuery(this);if(h.is("input:text")||h.is("textarea")){var g=this;var f=["keyup","focus","blur"];jQuery.each(f,function(j,k){jQuery(g).bind(k,function(){var l=jQuery(this);if(d(l.val())>a){l.val(c(l.val()));l.scrollTop(l[0].scrollHeight)}if(b){e=e||function(n,m){return n+"/"+m};jQuery(b).html(l.val()==jQuery(this).data("tooltip")?e(0,a):e(d(l.val()),a))}})});h.triggerHandler("blur")}})}});jQuery(function(){var a="placeholder" in document.createElement("input");jQuery.fn.extend({placeholder:function(d){if(a){jQuery(this).attr("placeholder",d)}else{if(jQuery(this).is(":input")){var c=jQuery(this);var b=c.css("color");c.focus(function(){var e=jQuery.trim(this.value);if(e==""||e==d){c.val("").css({color:b})}}).blur(function(){var e=jQuery.trim(this.value);if(e==""||e==d){c.val(d).css({color:"#888888"})}}).data("placeholder",d).triggerHandler("blur")}}return this},labelholder:function(){return this.each(function(){var c=jQuery(this);if(c.data("hoder")!==true){c.data("hoder",true);var b=jQuery("#"+c.attr("for"));b.bind("input propertychange focus blur keydown",function(d){if(d.type=="keydown"&&!d.ctrlKey&&!d.altKey&&!d.shiftKey&&d.keyCode!=8){c.hide()}else{if(b.val().length>0){c.hide()}else{c.show()}}}).triggerHandler("input");b.focus(function(){c.parent().addClass("focus")}).blur(function(){c.parent().removeClass("focus")})}})}})});function TabView(a,b,c){this.activeItem=null;this.items=[];this.triggers=[];this.activeClass=a||"selected";this.toggleClose=b||false;this.preventRepeat=c||false;this.addDefaultTrigger()}TabView.prototype={addItem:function(c,a){var d=null;if(arguments.length==1){d=c}else{d={tab:jQuery(c),view:jQuery(a)}}this.items.push(d);var b=this;d.tab.click(function(f){b.fireTriggers(d);f.preventDefault()});d.tab.data("view",d.view);return this},addTrigger:function(a){this.triggers.push(a);return this},fireTriggers:function(c){if(this.preventRepeat&&c.tab.is("."+this.activeClass)){return}for(var b=0,a=this.triggers.length;b<a;b++){this.triggers[b].call(c.tab,c)}},addDefaultTrigger:function(){var a=this;this.addTrigger(function(e){var d=e.tab.is("."+a.activeClass);for(var c=0,b=a.items.length;c<b;c++){a.items[c].tab.removeClass(a.activeClass);a.items[c].view.hide()}if(!a.toggleClose||!d){e.tab.addClass(a.activeClass);e.view.show();a.activeItem=e}})},click:function(a){this.fireTriggers(a)},hideAll:function(){for(var b=0,a=this.items.length;b<a;b++){var c=this.items[b];c.tab.removeClass(this.activeClass);c.view.hide()}}};(function(){var c={};var f=document.getElementsByTagName("head")[0]||document.documentElement;var e=document.createElement("div");var a={LOADED:3,LOADING:2,UNLOADED:1};var b={};var d={add:function(j,h){if(jQuery.isArray(j)){for(var g=0;g<j.length;g++){this.add(j[g],h)}}else{if(c.hasOwnProperty(j.name)&&!h){throw"module has already exist!"}j.files=jQuery.makeArray(j.files);j.requires=jQuery.makeArray(j.requires);j.provides=jQuery.makeArray(j.provides);j.preload=jQuery.makeArray(j.preload);c[j.name]=j;delete c[j.name].name}return jQuery},use:function(h,n,j){this.updateLoadedCache();var m=this.cleanResources(this.getResourcesProxy(h));if(m.files.length===0){return n&&n.call(j||window)}if(m.provides.length>0&&this.providesAvailable(m.provides)&&b.hasOwnProperty(m.files[0])===false){if(window.console){console.warn("警告：jQuery.use: module “"+h+"” 所提供的变量已经存在！请检查是否是同一文件的不同版本，去除旧版本！")}}var k=this;var g=0;function l(){if(++g===2&&n){setTimeout(function(){if(!k.providesAvailable(m.provides)){return setTimeout(arguments.callee,30)}n.call(j||window);k.preloadImages(m.preload)},30)}}this.loadFileProxy(m.css,l);this.loadFileProxy(m.js,l);return jQuery},updateLoadedCache:function(){var j=this.getURIFromDOM();for(var h=0,g=j.length;h<g;h++){var k=j[h];if(!b.hasOwnProperty(k)){b[k]={status:a.LOADED}}}},getURIFromDOM:function(){var h=this;function g(j){return function(){return h.resolve(this[j])}}return jQuery("script[src]").map(g("src")).get().concat(jQuery("link[href][rel=stylesheet]").map(g("href")).get())},getResourcesProxy:function(h){var g=[];var q=[];var r=[];var o=jQuery.makeArray(h);for(var m=0;m<o.length;m++){var h=o[m];if(c.hasOwnProperty(h)){var l=this.getResources(c[h]);g=g.concat(l.files);q=q.concat(l.provides);r=r.concat(l.preload)}else{throw new Error("No such component: "+h)}}var j=[];var n=[];for(var m=0;m<g.length;m++){var k=g[m];if(/\.css\b/i.test(k)){n.push(k)}else{j.push(k)}}return{files:g,js:j,css:n,provides:q,preload:r}},getResources:function(j){var k={files:[],provides:[],preload:[]};for(var h=0;h<j.requires.length;h++){var g=this.getResources(c[j.requires[h]]);k.files=k.files.concat(g.files);k.provides=k.provides.concat(g.provides);k.preload=k.preload.concat(g.preload)}k.files=k.files.concat(j.files);k.provides=k.provides.concat(j.provides);k.preload=k.preload.concat(j.preload);return k},cleanResources:function(g){g.js=this.removeRepeat(g.js);g.css=this.removeRepeat(g.css);g.preload=this.removeRepeat(g.preload);return g},removeRepeat:function(l){var g=[];var h={};for(var j=0;j<l.length;j++){var k=l[j];if(!h[k]){h[k]=true;g.push(k)}}return g},loadFileProxy:function(k,l){if(k.length===0){return l()}var j=this;var h=this.resolve(k.shift(0));if(b.hasOwnProperty(h)){if(b[h].status===a.LOADING){b[h].queue.push(function(){j.loadFileProxy(k,l)})}else{j.loadFileProxy(k,l)}}else{var g=/\.css\b/i.test(h)?this.loadStyle:this.loadScript;g.call(this,h,function(){j.loadFileProxy(k,l)})}},loadStyle:function(g,h){b[g]={status:a.LOADING,queue:[]};jQuery(f).append('<link type="text/css" rel="stylesheet" media="screen" href="'+g+'" />');this.fireSuccess(g,h)},loadScript:function(h,j){b[h]={status:a.LOADING,queue:[]};var g=this;jQuery.ajax({url:h,cache:true,dataType:"script",crossDomain:true,success:function(){g.fireSuccess(h,j)}})},fireSuccess:function(k,m){var l=b[k];l.status=a.LOADED;m&&m();for(var j=0,h=l.queue,g=h.length;j<g;j++){h[j]()}l.queue=[]},providesAvailable:function(o){for(var k=0,g=o.length,m=true;m&&k<g;k++){var n=o[k].split(".");var l=window;for(var h=0;h<n.length;h++){if(!(n[h] in l)){m=false;break}l=l[n[h]]}}return m},resolve:function(g){e.innerHTML='<a href="'+g+'"></a>';return e.firstChild.href},preloadImages:function(g){setTimeout(function(){for(var j=0,h=g.length;j<h;j++){(new Image()).src=g[j]}},30)},modules:function(g){return g?c[g]:c}};jQuery.use=jQuery.proxy(d,"use");jQuery.use.add=jQuery.proxy(d,"add");jQuery.use.modules=jQuery.proxy(d,"modules")})();jQuery.use.add([{name:"jqueryui",files:["http://static.meile.com/styles/apps/jqueryui.css","http://static.meile.com/scripts/modules/jqueryui/jquery.ui.js"],provides:["jQuery.ui"]},{name:"easing",files:["http://static.meile.com/scripts/modules/easing/jquery.easing.js"],provides:["jQuery.easing.module"]},{name:"lazyload",files:["http://static.meile.com/scripts/modules/lazyload/lazyload.js"],provides:["jQuery.fn.lazyload"]},{name:"swfupload",files:["http://static.meile.com/scripts/modules/swfupload/swfupload.js?v=12174.js"],provides:["SWFUpload"]},{name:"swfobject",files:["http://static.meile.com/scripts/modules/swfobject/swfobject.js?v=9309.js"],provides:["swfobject"]},{name:"calendar",files:["http://static.meile.com/scripts/modules/calendar/calendar.js"],provides:["Calendar"]},{name:"calendar2",files:["http://static.meile.com/scripts/modules/calendar/calendar2.css","http://static.meile.com/scripts/modules/calendar/calendar2.js?v=18358.js"],provides:["calendar"]},{name:"address",files:["http://static.meile.com/scripts/modules/address/address.js"],provides:["AddressLinkage"]},{name:"zclip",files:["http://static.meile.com/scripts/modules/zeroclipboard/jquery.zclip.js"],provides:["ZeroClipboard"]},{name:"ueditor",files:["http://static.meile.com/scripts/modules/ueditor/editor_config.js?v=292.js","http://static.meile.com/scripts/modules/ueditor/editor_all.js?v=18470.js","http://static.meile.com/scripts/modules/ueditor/themes/meile/ueditor.css?v=16000.css"],provides:["UE"]},{name:"easytemplate",files:["http://static.meile.com/scripts/modules/template/easytemplate.js"],provides:["easyTemplate"]},{name:"secure",files:["http://static.meile.com/scripts/modules/secure/md5.js"],provides:["calcMD5"]},{name:"crop",files:["http://static.meile.com/scripts/modules/crop/crop.css","http://static.meile.com/scripts/modules/crop/crop.js"],provides:["jQuery.cropper"]},{name:"uploadfigure",files:["http://static.meile.com/scripts/modules/uploadfigure/uploadfigure.css?v=329.css","http://static.meile.com/scripts/modules/uploadfigure/uploadfigure.js??v=329.js"],provides:["UploadFigure"]},{name:"comment",files:["http://static.meile.com/scripts/modules/comment/comment.js?v=15956.js"],provides:["CommentAction"]},{name:"pagination",files:["http://static.meile.com/scripts/modules/pagination/pagination.js?v=11185.js"],provides:["Pagination"]},{name:"playmedia",files:["http://static.meile.com/scripts/modules/playmedia/playmedia.js?v=20921.js"],provides:["getVedioHTML"]},{name:"suggest",files:["http://static.meile.com/styles/apps/suggest.css?v=16139.css","http://static.meile.com/scripts/modules/suggest/suggest.js?v=15643.js"],provides:["AutoComplete"]},{name:"publisher",files:["http://static.meile.com/scripts/modules/publisher/publisher.js?v=12756.js"],provides:["publisher"]},{name:"share",files:["http://static.meile.com/styles/apps/share.css?v=18259.css","http://static.meile.com/scripts/modules/share/share.js?v=18260.js"],provides:["share"]},{name:"gather",files:["http://static.meile.com/styles/apps/gather.css?v=9850.css","http://static.meile.com/scripts/modules/gather/gather.js?v=10142.js"],provides:["gather"]},{name:"soundproxy",files:["http://static.meile.com/scripts/modules/media/soundproxy.js?v=21558.js"],provides:["HTML5SoundProxy"]},{name:"tag",files:["http://static.meile.com/scripts/modules/tag/tag.js?v=23037.js"],provides:["TagAction"]},{name:"up",files:["http://static.meile.com/scripts/modules/up/up.js?v=16000.js"],provides:["upInit"]},{name:"search",files:["http://static.meile.com/scripts/modules/search/search.js?v=15663.js"],provides:["SearchAction"]},{name:"reproduce",files:["http://static.meile.com/styles/apps/forward.css?v=1.css","http://static.meile.com/scripts/modules/forward/forward.js?v=1.js"],provides:["reproduce"]},{name:"jScrollPane",files:["http://static.meile.com//scripts/modules/jscrollpane/jquery.jscrollpan.all.js"],provides:["jQuery.fn.jScrollPane"]},{name:"scrollspy",files:["http://static.meile.com/scripts/modules/scrollspy/mootools_yui_compressed.js","http://static.meile.com/scripts/modules/scrollspy/scrollspy_yui_compressed.js"],provides:["ScrollSpy"]},{name:"html5upload",files:["http://static.meile.com/scripts/modules/html5upload/jquery.html5uploader.min.js"],provides:["jQuery.fn.html5Uploader"]},{name:"guide",files:["http://static.meile.com/scripts/modules/guide/guide.js?v=5.js","http://static.meile.com/styles/apps/guide.css?v=5.css"],provides:["showGuideDialog"]},{name:"ajaxFileUpload",files:["http://static.meile.com/scripts/modules/ajaxfileupload/ajaxfileupload.js?v=329.js"],provides:["jQuery.ajaxFileUpload"]},{name:"wwwadmin",files:["http://static.meile.com/scripts/modules/wwwadmin/www_admin.js?v=23411.js","http://static.meile.com/scripts/modules/wwwadmin/www_admin.css?v=22068.css"],provides:["WwwAdmin"]},{name:"newcomment",files:["http://static.meile.com/scripts/modules/search/lightweight_songsearch.js","http://static.meile.com/styles/apps/newcomment.css"],provides:["newcomment"]},{name:"tooltip",files:["http://static.meile.com/scripts/modules/tooltip/colortip-1.0-jquery.js?v=2.js","http://static.meile.com/styles/apps/tooltip.css?v=1.css"],provides:["jQuery.fn.colorTip"]}]);var HoverMenuEvent={SHOW:"HoverMenuEvent.SHOW",HIDE:"HoverMenuEvent.HIDE"};function HoverMenu(b){HoverMenu.superClass.constructor.call(this);var a={entry:null,menu:null,showDelay:200,hideDelay:200,recountPos:function(d,c){return{top:d,left:c}},interceptor:function(){return true}};jQuery.extend(this,a,b);this.timer=null;this.entry=jQuery(this.entry);this.menu=jQuery(this.menu);this.init()}jQuery.extendClass(HoverMenu,EventDispatcher);jQuery.extend(HoverMenu.prototype,{init:function(){this.entry.add(this.menu).hover(jQuery.proxy(this,"show"),jQuery.proxy(this,"hide"));var a=this;jQuery(window).resize(function(){if(a.menu.is(":visible")){a.setMenuPos()}})},show:function(){if(this.interceptor()!==true){return}var a=this;clearTimeout(a.timer);a.timer=setTimeout(function(){a.setMenuPos();a.menu.show();a.dispatchEvent(HoverMenuEvent.SHOW)},a.showDelay)},hide:function(){var a=this;clearTimeout(a.timer);a.timer=setTimeout(function(){a.menu.hide();a.dispatchEvent(HoverMenuEvent.HIDE)},a.hideDelay)},setMenuPos:function(){var c=this.entry.offset();var b=c.top+this.entry.outerHeight();var a=c.left;this.menu.css(this.recountPos(b,a))}});var ClickMenuEvent={SHOW:"HoverMenuEvent.SHOW",HIDE:"HoverMenuEvent.HIDE"};function ClickDownMenu(b){ClickDownMenu.superClass.constructor.call(this);var a={entry:null,menu:null,recountPos:function(d,c){return{top:d,left:c}},interceptor:function(){return true}};jQuery.extend(this,a,b);this.entry=jQuery(this.entry);this.menu=jQuery(this.menu);this.init()}jQuery.extendClass(ClickDownMenu,EventDispatcher);jQuery.extend(ClickDownMenu.prototype,{init:function(){var a=this;this.entry.click(function(b){if(a.menu.is(":visible")){a.hide()}else{a.show();b.stopPropagation()}});this.menu.click(function(b){b.stopPropagation()});jQuery(document).click(function(){a.hide()});jQuery(window).resize(function(){if(a.menu.is(":visible")){a.setMenuPos()}})},show:function(){if(this.interceptor()!==true){return}this.setMenuPos();this.menu.show();this.dispatchEvent(ClickMenuEvent.SHOW)},hide:function(){this.menu.hide();this.dispatchEvent(ClickMenuEvent.HIDE)},setMenuPos:function(){var c=this.entry.offset();var b=c.top+this.entry.outerHeight();var a=c.left;this.menu.css(this.recountPos(b,a))}});function isLogin(){return !!(window.USERINFO&&USERINFO.id!==0&&jQuery.isNumeric(USERINFO.id))}jQuery(function(){jQuery(".labelholder").labelholder()});var SoundUtil={secondToRender:function(a){return isNaN(a)?"00:00":(this.formatNumber(parseInt(a/60),2)+":"+this.formatNumber(a%60,2))},renderToSecond:function(a){if(/^\d{1,2}:\d{1,2}$/.test(a)){var b=a.split(":");return parseInt(b[0],10)*60+parseInt(b[1],10)}return 0},formatNumber:function(c,a){var f=String(c);if(f.length>a){return f.substring(0,a)}else{var e="";for(var d=0,b=(a-f.length);d<b;d++){e+="0"}return e+f}}};var MeileEvent={START:"MeileEvent.START",STOP:"MeileEvent.STOP",PAUSE:"MeileEvent.PAUSE",RESUME:"MeileEvent.RESUME",NEXT:"MeileEvent.NEXT",PREV:"MeileEvent.PREV",ERROR:"MeileEvent.ERROR",LOADED:"MeileEvent.LOADED",PROGRESS:"MeileEvent.PROGRESS",COMPLETE:"MeileEvent.COMPLETE",STALLED:"MeileEvent.STALLED",READY:"MeileEvent.READY"};var SoundAdjust=new EventDispatcher();var SoundProxy={isSupported:function(){var a=document.createElement("audio");if(a.canPlayType&&a.canPlayType("audio/mpeg;")){return true}else{return false}},initPlayer:function(){if(jQuery.hasFlash()){jQuery.jsContainer().append('<div id="mediaplayer-flash"><div id="musicplayer" /></div>');var a={};var c={quality:"high",bgcolor:"#FFFFFF",allowscriptaccess:"always"};var b={id:"musicplayer",name:"musicplayer",align:"middle"};jQuery.use("swfobject",function(){swfobject.embedSWF("http://static.meile.com/player/musicplayer.swf?v=12587.swf","musicplayer",300,120,"9.0.0","",a,c,b)},this)}else{if(this.isSupported()){jQuery.use("soundproxy",function(){window.SoundProxy=window.HTML5SoundProxy})}else{jQuery.alert({message:"OH，真不幸。。。<br />您的浏览器既没有安装Flash也不支持HTML5或MP3！",modal:true})}}this.initPlayer=jQuery.noop},readyMovie:function(){var a=null;var b="musicplayer";if(navigator.appName.indexOf("Microsoft")!=-1){if(typeof(window[b].start)=="function"){a=window[b]}else{if(typeof(document[b].start)=="function"){a=document[b]}}}else{a=document[b]}window.SoundProxy=a}};var SongLogType={START:"SongLogType.start",PAUSE:"SongLogType.pause",COMPLETE:"SongLogType.complete"};var SongLogger={criticalValue:function(a){return parseInt(a*0.5)},isCriticaled:function(b,a){if(b==0){return true}return a/b>=0.5},log:function(d,a,b){if(d<=0||b<=0){return}var c="http://www.meile.com/play?songId="+d;if(a==SongLogType.COMPLETE&&b>0){c+="&time="+b}new Image().src=c}};var EntryPlayerLogType={UGC:"ugc",ALBUM:"album",BOARD:"board"};var EntryPlayerLogger={isSupport:function(a){var a=this.getLogType(a);if(a){return true}else{return false}},getLogType:function(a){for(p in EntryPlayerLogType){if(EntryPlayerLogType.hasOwnProperty(p)){var b=EntryPlayerLogType[p];if(b==a){return b}}}return null},log:function(d){var b=this.getLogType(d.type);var a=d.fromId;var c="http://www.meile.com/entryplayer?";if(!a||a<=0){return}c+="type="+EntryPlayerLogType[p];c+="&fromId="+d.fromId;if(b==EntryPlayerLogType.UGC){c+="&authorId="+d.authorId}new Image().src=c}};function SingletonPandora(a){a=a||{};this.path=a.path;this.brige=a.brige;this.target=a.target;this.width=a.width||985;this.height=a.height||600;this.top=a.top||Math.max(0,(screen.availHeight-this.height)/2);this.left=a.left||Math.max(0,(screen.availWidth-this.width)/2);this.features="toolbar=no,status=no,menubar=no,scrollbars=yes,resizable=yes,location=no"}function isSafari(){var a={};var b=navigator.userAgent.toLowerCase();var c;(c=b.match(/version\/([\d.]+).*safari/))?a.safari=c[1]:0;if(a.safari){return true}return false}SingletonPandora.prototype={invoking:"invoking",parameter:"parameter",changeCurrentPlay:"changeCurrentPlay",openPandora:function(f,e,d){if(!this.validatorSearh(f+e)){return}var b=this.brige+this.assembleSearch(f,e,d);if(isSafari()){var c=[];c.push("height="+this.height);c.push("width="+this.width);c.push("left="+this.left);c.push("top="+this.top);var a=window.open(b,this.target,this.features+","+c.join(","))}else{var a=window.open(b,this.target)}a&&a.focus()},createBrige:function(){if(this.isTop()){location.href=this.path+location.search}else{window.name=this.target;if(location.search){var b=this.paramOfUrl();var f=b[this.invoking]||"";var d=b[this.parameter]||"";var a=b[this.changeCurrentPlay];if(this.validatorSearh(f)){try{return(new Function("return top."+f+'("'+d+'",'+a+")"))()}catch(c){}}}}},assembleSearch:function(d,c,b){var a="";if(d){a+="?"+this.invoking+"="+d}if(c){a+="&"+this.parameter+"="+c}if(typeof b!="undefined"){a+="&"+this.changeCurrentPlay+"="+b}return a},validatorSearh:function(d){var b=true;for(var c=0,a=d.length;c<a;c++){var f=d.charAt(c);var g=d.charCodeAt(c);var e=/^([\w_\,\.\% ]+)$/;b=e.test(f)||g>255;if(!b){break}}return b},paramOfUrl:function(a){a=a||location.href;var d={};var e=a.substring(a.indexOf("?")+1).split("&");for(var c=0;c<e.length;c++){var g=e[c].split("=");if(g.length==2){var b=decodeURIComponent(g[0]);var f=decodeURIComponent(g[1]);if(d.hasOwnProperty(b)){d[b]=jQuery.makeArray(d[b]);d[b].push(f)}else{d[b]=f}}}return d},isTop:function(){return top===self}};(function(){var a=new SingletonPandora({path:"http://www.meile.com/player",brige:"http://www.meile.com/brige.html",target:"pandora"});jQuery(".entry").live("click",function(f){var d=jQuery(this);if(d.data("music")){a.openPandora("CrossInvoking.addSongsToTask",d.data("music"))}else{if(d.data("album")){a.openPandora("CrossInvoking.addAlbumToTask",d.data("album"))}else{if(d.data("board")){var j=d.data("board");var g=d.data("issue");if(g&&g>0){a.openPandora("CrossInvoking.addBoardToTask",g)}else{a.openPandora("CrossInvoking.addBoardToTask",j)}}else{if(d.data("ugc")&&d.data("user")){var b=d.data("ugc");var c=d.data("user");a.openPandora("CrossInvoking.addUgcToTask",b+"_"+c)}else{a.openPandora()}}}}var h=d.data("log-param");if(h&&h.type&&EntryPlayerLogger.isSupport(h.type)){EntryPlayerLogger.log(h)}f.preventDefault()});jQuery(".mini-player .mini-toggle").live("click",function(c){var b=jQuery(this).parents(".mini-player:first");a.openPandora("CrossInvoking.addSongsToTask",b.data("track"));c.preventDefault()});jQuery(".add-entry").live("click",function(f){var d=jQuery(this).offset().left;var c=jQuery(this).offset().top;jQuery('<div class="addSongTip" style="background:url(http://static.meile.com/images/bg/add-song-success.png?v=1.png);width:90px;height:36px;position:absolute;z-index:10000;"></div>').appendTo("body").css("left",d-35).css("top",c-20).animate({top:c-40},350,function(){jQuery(this).fadeOut(400,function(){jQuery(this).remove()})});var b=jQuery(this);if(b.data("music")){a.openPandora("CrossInvoking.addSongsToTask",b.data("music"),false)}else{if(b.data("album")){a.openPandora("CrossInvoking.addAlbumToTask",b.data("album"))}else{if(b.data("board")){var h=b.data("board");var g=b.data("issue");if(g&&g>0){a.openPandora("CrossInvoking.addBoardToTask",g)}else{a.openPandora("CrossInvoking.addBoardToTask",h)}}else{a.openPandora()}}}f.preventDefault()});window.openPandora=jQuery.proxy(a,"openPandora")})();function buildUserMenu(){var e=jQuery("#sideNav .menu"),c=jQuery("#accountMenu");if(e.size()==0){return false}if(c.size()==0){if(typeof(USERINFO)!="undefined"){c=jQuery('<div id="accountMenu"><div class="profile"><a href="/u/'+USERINFO.id+'"><img src="'+USERINFO.tiny+'"/><span>'+USERINFO.name+'</span><p>查看我的个人主页</p></a></div><a class="menu-item library png" href="/user/library">我的曲库</a><a class="menu-item settings png" href="/user/setting">个人设置</a><a class="menu-item invite png" href="/invite/register">邀请好友</a><a class="menu-item logout png" href="/logout">退出账号</a></div>').appendTo(jQuery.jsContainer())}if(jQuery("body").is(".player")){c.find("a").attr("target","_blank");c.find(".logout").click(function(){window.close();return true})}function d(g,f){var f=f-jQuery(window).scrollLeft()-110;g=50;return{left:f,top:g-3}}if(!window.clickDownMenu){var b=new ClickDownMenu({entry:e,menu:c,recountPos:d});b.addEventListener(ClickMenuEvent.SHOW,function(){a.hide();e.find("span.ic-menu").addClass("active")});b.addEventListener(ClickMenuEvent.HIDE,function(){e.find("span.ic-menu").removeClass("active")});window.clickDownMenu=b}}if(!window.notifiCation||a.notifyMenu.size()==0){var a=new NotifiCation();a.addEventListener(NotifiCationEvent.SHOW_EVENT,function(){if(window.clickDownMenu){window.clickDownMenu.hide()}});window.notifiCation=a}}jQuery(buildUserMenu);jQuery(function(){var b=jQuery("#found input[name=q]");if(b.size()==0){return}b.focus(c);function c(){b.unbind("focus",c);jQuery.use("suggest",function(){var d=new AutoComplete({node:b,url:"http://www.meile.com/search/ajax?count=3",width:295,hasSelect:false,recountPos:function(f){return{left:f.left-jQuery(window).scrollLeft()-60,top:40}}});d.renderItem=function(t){var x=jQuery('<div class="searchPanel" id="searchPanel" />');x.prepend('                    <div id="search-loading">                        <p><img src="http://static.meile.com/images/load.gif"></p>                    </div>');if(!t){return x}var u=t.ARTIST;var h=t.MUSIC;var j=t.ALBUM;var n=t.USER;if(u&&u.length>0){var v=jQuery('<div class="type type_artist clearfix"><h4><span class="title">音乐人</span></h4><dl></dl></div>');var f=v.find("dl");for(var s=0;s<3&&s<u.length;s++){var r=u[s];var w=jQuery('<dd><a href="/artist/'+r.id+'"><img alt="'+r.name+'" src="'+r.figures.tiny+'" /><span class="easing">'+r.name+"</span></a></dd>");w.data("value",r.name);f.append(w)}x.append(v)}if(h&&h.length>0){var l=jQuery('<div class="type type_music clearfix"><h4><span class="title">歌曲</span></h4><dl></dl></div>');var f=l.find("dl");for(var s=0;s<3&&s<h.length;s++){var g=h[s];var w=jQuery('<dd><a href="/song/'+g.id+'"><span class="name">'+g.name+"</span><span>- "+g.artistName+'</span><span title="播放" class="play-icon-search entry" data-music="'+g.id+'"></span></a></dd>');w.data("value",g.name);f.append(w)}x.append(l)}if(j&&j.length>0){var m=jQuery('<div class="type type_album clearfix"><h4><span class="title">专辑</span></h4><dl></dl></div>');var f=m.find("dl");for(var s=0;s<3&&s<j.length;s++){var k=j[s];var w=jQuery('<dd><a href="/album/'+k.id+'"><img alt="'+k.name+'" src="'+k.covers.tiny+'" /><p class="clearfix"><span class="name">'+k.name+'</span><small class="easing">'+k.artistName+"</small></p></a></dd>");w.data("value",k.name);f.append(w)}x.append(m)}if(n&&n.length>0){var q=jQuery('<div class="type type_user clearfix"><h4><span class="title">用户</span></h4><dl></dl></div>');var f=q.find("dl");for(var s=0;s<3&&s<n.length;s++){var o=n[s];var w=jQuery('<dd><a href="/u/'+o.id+'"><img alt="'+o.name+'" src="'+o.tinyHead+'" /><span class="easing">'+o.name+"</span></a></dd>");w.data("value",o.name);f.append(w)}x.append(q)}if(x.find("dl").size()==0){x.append('<p class="no_result">没有相关结果</p>')}else{x.append('<p class="more"><a href="/search?q='+encodeURIComponent(d.term)+'">查看所有结果　&rsaquo;&rsaquo;</a></p>')}return x};var e=jQuery("#found form").submit(function(){return false});d.addEventListener(AutoCompleteEvent.ENTER,function(g,f){if(f&&f.size()>0){location.href=f.find("a").attr("href")}else{e[0].submit()}});d.addEventListener(AutoCompleteEvent.STARTQUERY,function(g,f){if(jQuery("#searchPanel").length<1){d.showSuggest()}jQuery("#search-loading").slideDown(200)});d.addEventListener(AutoCompleteEvent.ENDQUERY,function(f){jQuery("#search-loading").slideUp(200)});d.addEventListener(AutoCompleteEvent.ERROR,function(f){jQuery("#search-loading").slideUp(200);jQuery("#searchPanel").html('                    <div class="no_result" id="no_result">                        <img src="http://static.meile.com/images/ugc/no-result.png">                        很抱歉，暂时没有相关结果。                    </div>');jQuery("#no_result").fadeIn(200)})})}var a=jQuery("#found .submit-search");a.click(function(){jQuery("#found form")[0].submit()})});jQuery(function(){if(!jQuery.support.fixed){return false}var b=null;var a=function(){return 960+(jQuery("body").width()-960)/2+10};b=jQuery('<div id="backTop"></div>');b.css({left:a()});b.appendTo(jQuery.jsContainer());b.click(function(){jQuery.scrollTween(0)});jQuery(window).scroll(function(){if(jQuery(document).scrollTop()>0){b.fadeIn(200)}else{b.fadeOut(200)}}).triggerHandler("scroll");jQuery(window).resize(function(){b.css({left:a()})})});jQuery(function(){if(!jQuery.support.fixed){return false}var b=null;var a=function(){return 960+(jQuery("body").width()-960)/2+10};b=jQuery('<a id="feedback" href="http://www.meile.com/feedback" target="feedback"></a>');b.css({left:a()});b.appendTo(jQuery.jsContainer());jQuery(window).resize(function(){b.css({left:a()})})});var NotifiCationEvent={LOADED_EVENT:"loaded_event",SHOW_EVENT:"show_event",NOTIFY_EVENT:"notify_event",REMOVE_EVENT:"remove_event",CLEAR_EVENT:"clear_event"};function NotifiCation(){NotifiCation.superClass.constructor.call(this);this.hasLoaded=false;this.lastId=0;this.notifyList=[];this.notifyMenu=jQuery("#sideNav .notify");if(this.notifyMenu.size()>0){this.init()}}jQuery.extendClass(NotifiCation,EventDispatcher);jQuery.extend(NotifiCation.prototype,{init:function(){var c=this;c.notifyPanel=jQuery('<div id="notification" ><div class="header-icon ic-notify-dir png"></div><div class="item-panel scroll-pane horizontal-only"><dl class="list"></dl><p class="loading gray">加载中...</p><p class="no-notify gray">还没有新通知</p></div><div class="summary clearfix"></div></div>');var a=parseInt(jQuery(window).height()*0.8);c.notifyPanel.find(".item-panel").css("max-height",a);jQuery.jsContainer().append(this.notifyPanel);function e(m,l){var f=l.totalCount||0;if(f==0){this.hasLoaded=true;this.notifyPanel.find(".no-notify").show()}else{var k=l.newCount||0;var j=this.notifyPanel.find("dl").show();if(k!=0||this.hasLoaded!=true){this.hasLoaded=true;j.html('<dt class="count">'+k+"个新通知</dt>")}if(l.notifyHtml&&jQuery.trim(l.notifyHtml)!=""){j.append(l.notifyHtml);var n=j.find("dd:last").attr("id");this.lastId=n.replace(/[^\d]/g,"")}var h=this.notifyPanel.find(".summary").show().html("");var g=j.find("dd").size();if(g<f){h.append('<a class="more-item">更多通知(还有'+(f-g)+"条)...</a>")}if(g>0){h.append('<a class="clear">全部清除</a>')}jQuery.use("jScrollPane",function(){c.notifyPanel.find(".scroll-pane").jScrollPane({verticalDragMaxHeight:100,arrowScrollOnHover:true,animateScroll:true}).find(".jspVerticalBar").show()})}}function b(h,f){var g=jQuery("#notify_"+f);g.fadeOut(function(){g.remove()})}function d(h,g){var f=this.notifyPanel;jQuery.scrollTween(0,function(){f.find("dl").html("").css("display","none");f.find(".clear").remove();var j=jQuery("#notification .more-item");if(j.size()==0){f.find(".no-notify").show()}else{j.click()}})}this.addEventListener(NotifiCationEvent.LOADED_EVENT,e);this.addEventListener(NotifiCationEvent.REMOVE_EVENT,b);this.addEventListener(NotifiCationEvent.CLEAR_EVENT,d);this.bindEvent()},hasNotify:function(){return this.notifyMenu.find("span.num-inner").html()!=0&&this.notifyMenu.find("span.num-inner").html()!=""},show:function(){if(this.hasLoaded!=true||this.hasNotify()){this.load()}this.setPosition();this.notifyPanel.show();this.notifyMenu.find("span.ic-notify").addClass("active");this.dispatchEvent(NotifiCationEvent.SHOW_EVENT)},hide:function(){if(this.notifyPanel&&this.notifyPanel.is(":visible")){this.notifyPanel.hide();this.notifyMenu.removeClass("new").find("span.ic-notify").removeClass("active").find("span.num-inner").html("")}},toggle:function(a){if(this.notifyPanel.is(":visible")){this.hide()}else{this.show()}return false},add:function(){},remove:function(c){var a=/[^\d]/g;var b=jQuery(c.target).parents("dd:first");var d=b.attr("id").replace(a,"");this.commonRemove(d)},clear:function(d){var c=this.notifyPanel.find("dd");if(c.size()>0){var b=[];var a=/[^\d]/g;c.each(function(){var e=jQuery(this);b.push(e.attr("id").replace(a,""))});this.commonRemove(b)}},commonRemove:function(b){var c="";if(b.constructor==Array){c="ids="+b.join("&ids=")}else{c="ids="+b}var a=this;jQuery.ajax({url:"http://www.meile.com/notify/delete/ajax",data:c,type:"post",dataType:"json",success:function(d){if(d&&d.code==0){if(b.constructor==Array){a.dispatchEvent(NotifiCationEvent.CLEAR_EVENT,b)}else{a.dispatchEvent(NotifiCationEvent.REMOVE_EVENT,b)}}else{jQuery.message("删除失败...")}}})},setPosition:function(){var b=this.notifyMenu.offset().left-jQuery(window).scrollLeft()-260;this.notifyPanel.css({top:37,left:b});var a=jQuery("#sideNav .notify").offset().left-b+17-10;jQuery("#notification .dir").css("left",a)},load:function(c){var b=this;var d=jQuery("#notification .loading");var a=this.notifyPanel.find(".no-notify");jQuery.ajax({url:"http://www.meile.com/notify/ajax",data:{lastId:c||0},dataType:"json",beforeSend:function(){d.show();a.hide()},success:function(e){if(e&&e.code==0){b.dispatchEvent(NotifiCationEvent.LOADED_EVENT,e.values)}else{b.hide();jQuery.message("服务器异常，加载通知失败...")}},error:function(){b.hide();jQuery.message("服务器异常，加载通知失败...")},complete:function(){d.hide()}})},bindEvent:function(){this.notifyMenu.click(jQuery.proxy(this,"toggle"));this.notifyMenu.mousedown(function(b){b.stopPropagation()});this.notifyPanel.mousedown(function(b){b.stopPropagation()});jQuery(window).resize(jQuery.proxy(this,"setPosition"));jQuery(document).mousedown(jQuery.proxy(this,"hide"));var a=this;jQuery("#notification .more-item").live("click",function(b){a.load(a.lastId);b.preventDefault()});jQuery("#notification .clear").live("click",jQuery.proxy(this,"clear"));jQuery("#notification .item .close").live("click",jQuery.proxy(this,"remove"))}});var LoginEvent={SUCCESS:"LoginEvent.SUCCESS"};(function(){function a(){a.superClass.constructor.call(this);this.dialog=null}jQuery.extendClass(a,EventDispatcher);jQuery.extend(a.prototype,{getDialog:function(){if(this.dialog===null){var b='<div id="loginDialog"><header><div class="pos-fix clearfix"><h2 class="title">登录美乐</h2><a class="close"></a></div></header><div class="content clearfix"><div class="connect"><h4>快速登录</h4><div class="otherAccount"><ul class="clearfix f12 fb"><li class="otherAccountQQ"><a href="/connect/1/qzone"><span class="qqIcon"></span><span class="otherAccountText">QQ空间</span></a></li><li class="otherAccountWeibo"><a href="/connect/1/weibo"><span class="weiboIcon"></span><span class="otherAccountText">新浪微博</span></a></li><li class="otherAccountRenren"><a href="/connect/1/renren"><span class="renrenIcon"></span><span class="otherAccountText">人人网</span></a></li><li class="otherAccountKaixin"><a href="/connect/1/kaixin"><span class="kaixinIcon"></span><span class="otherAccountText">开心网</span></a></li></ul></div></div><div class="mysite"><h4>用美乐账号登录：</h4><form class="dialogLoginForm" name="loginform" action="http://www.meile.com/login" method="post"><div class="pos-fix"><p class="item labelpanel"><label for="dialogEmail" class="labelholder">邮箱</label><input type="email" class="input-text" name="account" id="dialogEmail" /></p><p class="item labelpanel"><label for="dialogPassword" class="labelholder">密码</label><input type="password" class="input-text" name="password" id="dialogPassword" /></p><p class="item labelpanel code-panel"><label class="labelholder" for="dialogCode">验证码</label><input type="text" id="dialogCode" name="code" class="input-text" /></p><p class="item image-panel clearfix"><img alt="验证码" src="http://www.meile.com/identify/code.jpg" /><a onclick="LoginDialog.changeCodeImg();">看不清,换一张</a></p><p class="item submit-wrapper"><span><input type="checkbox" name="remember" id="dialogRemenber" class="input-check" checked="true"/><label for="dialogRemenber" class="forcheck">记住登录状态</label></span><span class="forget"><a href="">忘记密码？</a></span><input type="submit" value="登录" class="submit" /></p><p class="msg"></p></div></form></div></div><footer>还没有美乐账号？<a href="http://www.meile.com/register">立即注册</a></footer></div>';this.dialog=jQuery.dialog({modal:true,nopadding:true,width:465,pattern:"normal",message:b});this.bindEvent()}return this.dialog},show:function(){this.getDialog().show();this.getDialog().getBody().find(".image-panel, .code-panel").hide();jQuery("#dialogEmail").focus()},hide:function(){this.getDialog().hide()},checkForm:function(b){var c=true;if(jQuery.trim(b.account.value)===""){b.account.value="";if(c===true){b.account.focus()}c=false;jQuery(b.account).parents(".item").addClass("error")}else{jQuery(b.account).parents(".item").removeClass("error")}if(b.password.value===""){if(c===true){b.password.focus()}c=false;jQuery(b.password).parents(".item").addClass("error")}else{jQuery(b.password).parents(".item").removeClass("error")}return c},judgeCode:function(b){jQuery.ajax({url:"/getCode",data:{account:b},type:"post",dataType:"json",success:function(c){if(c.code==0){jQuery("#loginDialog .image-panel, #loginDialog .code-panel").hide()}else{jQuery("#loginDialog .image-panel, #loginDialog .code-panel").show()}}})},changeCodeImg:function(){jQuery("#loginDialog .image-panel img").attr("src","/identify/code.jpg?r="+new Date().getTime())},bindEvent:function(){var b=this;jQuery("#loginDialog .labelholder").labelholder();jQuery("#loginDialog .close").click(jQuery.proxy(this,"hide"));jQuery('#loginDialog form [name="account"]').blur(function(){var c=jQuery.trim(this.value);if(c!=""){b.judgeCode(c)}});jQuery("#loginDialog .connect .social-site a").click(function(){window.name=window.name||"tempName_"+new Date().getTime();var g="?f="+encodeURIComponent("http://www.meile.com/callback.html?target="+name+"&url="+location.href);var d=620,c=520,f=Math.max(0,(screen.availHeight-c)/2),e=Math.max(0,(screen.availWidth-d)/2);window.open(this.href+g,"_blank","toolbar=no,status=no,menubar=no,scrollbars=yes,resizable=yes,location=no,width="+d+",height="+c+",top="+f+",left="+e+"");return false});jQuery("#loginDialog form").submit(function(c){if(b.checkForm(this)){jQuery.use("secure",function(){var d={account:this.account.value,password:calcMD5(this.password.value),code:this.code.value,remember:jQuery("#dialogRemenber").is(":checked")};jQuery.ajax({url:"http://www.meile.com/login",data:d,type:"post",dataType:"json",beforeSend:function(){jQuery("#loginDialog .msg").html("正在登录...").show()},success:function(f){if(f.code==0){b.hide();jQuery("#loginDialog .msg").hide();var g=f.values;window.USERINFO=USERINFO={id:g.uid,name:g.name,mini:g.miniHead,tiny:g.tinyHead,common:g.commonHead};if(jQuery("#sideNav .menu").size()==0){var j='<a title="通知" class="notify"><span class="header-icon ic-notify"></span><span class="num"><span class="num-inner">0</span></span></a><a title="播放器" class="player entry"><span class="header-icon ic-player"></span></a><a class="menu"><img src='+USERINFO.mini+" alt="+USERINFO.name+'><span class="header-icon ic-menu"></span></a>';jQuery("#sideNav").html(j);buildUserMenu()}b.dispatchEvent(LoginEvent.SUCCESS)}else{var h=f.code;var e=jQuery("#loginDialog .msg").show();if(h==506){e.html(f.values.message+' <a href="'+f.values.aurl+'" target="_blank">点此查看详情</a>')}else{if(h==507){e.html('您的账号由于涉嫌投票作弊而被冻结，投票记录将于1周内清空，如有疑问：<a href="/feedback" target="feedback">点此申诉</a>')}else{if(h==2){e.html("验证码不正确，请重新输入！");b.changeCodeImg()}else{if(h==3){e.html("验证码已失效，请重新输入！");b.changeCodeImg()}else{e.html("邮箱或密码不匹配，请检查是否输入错误！");if(f.values.errorCount>=3){jQuery("#loginDialog .image-panel, #loginDialog .code-panel").show()}}}}}}}})},this)}return false})}});window.LoginDialog=new a()})();jQuery(function(){function a(b){var d=[];var e=jQuery("input[name="+b+"][type=hidden], :checkbox:checked[name="+b+"]");for(var c=0;c<e.length;c++){d.push(e[c].value)}return d}jQuery(".play-songs").click(function(f){var c=jQuery(this);var b=c.data("name");if(b){var d=a(b);if(d.length>0){openPandora("CrossInvoking.addSongsToTask",d)}else{jQuery.message("请选择要播放的歌曲!")}}var g=c.data("log-param");if(g&&g.type&&EntryPlayerLogger.isSupport(g.type)){EntryPlayerLogger.log(g)}f.preventDefault()});jQuery(".add-songs").click(function(f){var c=jQuery(this);var b=c.data("name");if(b){var d=a(b);if(d.length>0){openPandora("CrossInvoking.addSongsToTask",d,false)}else{jQuery.message("请选择要播放的歌曲!")}}var g=c.data("log-param");if(g&&g.type&&EntryPlayerLogger.isSupport(g.type)){EntryPlayerLogger.log(g)}f.preventDefault()})});var FollowArtistEvent={FOLLOW_EVENT:"FollowArtistEvent.FOLLOW_EVENT",UNFOLLOW_EVENT:"FollowArtistEvent.UNFOLLOW_EVENT"};function FollowArtist(){FollowArtist.superClass.constructor.call(this)}jQuery.extendClass(FollowArtist,EventDispatcher);jQuery.extend(FollowArtist.prototype,{follow:function(b){var a=this;jQuery.post("http://www.meile.com/follow/",{resource:b},function(c){if(c&&c.code==0){a.dispatchEvent(FollowArtistEvent.FOLLOW_EVENT);jQuery.message("关注成功！")}else{jQuery.message((c&&c.values.message)||"服务器异常,请稍后再试！")}},"json")},unfollow:function(b){var a=this;jQuery.confirm({width:300,message:"您确定取消关注吗？",modal:true,callback:function(){jQuery.post("http://www.meile.com/unfollow/",{resource:b},function(c){if(c&&c.code==0){a.dispatchEvent(FollowArtistEvent.UNFOLLOW_EVENT)}else{jQuery.message((c&&c.values.message)||"服务器异常,请稍后再试！")}},"json");return true}})}});jQuery(function(){var a=null;var b=new FollowArtist();b.addEventListener(FollowArtistEvent.FOLLOW_EVENT,function(c){if(a!==null){a.attr("class","input-gray follow unfollow-artist").val("已关注").html("&nbsp;已关注&nbsp;&nbsp;")}});b.addEventListener(FollowArtistEvent.UNFOLLOW_EVENT,function(c){if(a!==null){a.attr("class","input-button follow follow-artist").val("关注").html('<span class="icon">关注</span>')}});jQuery(".follow-artist").live("click",function(d){a=jQuery(this);var c=a.data("artist");b.follow(c)});jQuery(".unfollow-artist").live("click",function(d){a=jQuery(this);var c=a.data("artist");b.unfollow(c)}).live("mouseenter",function(){jQuery(this).val("取消关注").html("取消关注")}).live("mouseleave",function(){jQuery(this).val("已关注").html("&nbsp;已关注&nbsp;&nbsp;")})});var FollowEvent={TagFollow:"FollowEvent.tag.follow",TagUnFollow:"FollowEvent.tag.unfollow"};function FollowTag(){FollowTag.superClass.constructor.call(this)}jQuery.extendClass(FollowTag,EventDispatcher);jQuery.extend(FollowTag.prototype,{follow:function(b){var a=this;jQuery.post("http://www.meile.com/follow/",{resource:b},function(c){if(c&&c.code==0){a.dispatchEvent(FollowEvent.TagFollow);jQuery.message("订阅成功！")}else{jQuery.message((c&&c.values.message)||"服务器异常,请稍后再试！")}},"json")},unfollow:function(b){var a=this;jQuery.confirm({width:300,message:"您确定取消订阅吗？",modal:true,callback:function(){jQuery.post("http://www.meile.com/unfollow/",{resource:b},function(c){if(c&&c.code==0){a.dispatchEvent(FollowEvent.TagUnFollow)}else{jQuery.message((c&&c.values.message)||"服务器异常,请稍后再试！")}},"json");return true}})}});jQuery(function(){var a=null;var b=new FollowTag();b.addEventListener(FollowEvent.TagFollow,function(c){if(a!==null){a.attr("class","input-gray follow unfollow-tag").val("已订阅").html('<span class="follow-txt">已订阅</span>')}});b.addEventListener(FollowEvent.TagUnFollow,function(c){if(a!==null){a.attr("class","input-button follow follow-tag").val("订阅").html('<span class="icon mini-follow"></span><span class="follow-txt">订阅</span>')}});jQuery(".follow-tag").live("click",function(d){a=jQuery(this);var c=a.data("tag");b.follow(c)});jQuery(".unfollow-tag").live("click",function(d){a=jQuery(this);var c=a.data("tag");b.unfollow(c)}).live("mouseenter",function(){jQuery(this).val("取消订阅").html('<span class="follow-txt">取消订阅</span>')}).live("mouseleave",function(){jQuery(this).val("已订阅").html('<span class="follow-txt">已订阅</span>')})});var LikeSongEvent={LIKE:"like_event",UNLIKE:"unlike_event"};function LikeSong(){LikeSong.superClass.constructor.call(this)}jQuery.extendClass(LikeSong,EventDispatcher);jQuery.extend(LikeSong.prototype,{like:function(b){var a=this;jQuery.post("http://www.meile.com/like/",{resource:b},function(c){if(c&&c.code==0){a.dispatchEvent(LikeSongEvent.LIKE)}else{jQuery.message((c&&c.values.message)||"服务器异常,请稍后再试！")}},"json")},unlike:function(b){var a=this;jQuery.post("http://www.meile.com/unlike/",{resource:b},function(c){if(c&&c.code==0){a.dispatchEvent(LikeSongEvent.UNLIKE)}else{jQuery.message((c&&c.values.message)||"服务器异常,请稍后再试！")}},"json")}});jQuery(function(){var b=null;var a=new LikeSong();a.addEventListener(LikeSongEvent.LIKE,function(c){if(b!==null){b.attr("class","input-action ilike unlike-song")}});a.addEventListener(LikeSongEvent.UNLIKE,function(c){if(b!==null){b.attr("class","input-action like like-song")}});jQuery(".like-song").live("click",function(c){b=jQuery(this);a.like(b.data("song"));c.preventDefault()});jQuery(".unlike-song").live("click",function(c){b=jQuery(this);a.unlike(b.data("song"));c.preventDefault()})});jQuery(function(){var b=null;var a=new LikeSong();a.addEventListener(LikeSongEvent.LIKE,function(c){b.each(function(){jQuery(this).parents(".song:first").find(".actions.widget .like").addClass("ilike")});if(b&&b.length>0){jQuery.message({width:400,message:"美乐记下了"+b.length+"首您喜欢的歌曲哦!"})}});jQuery(".like-songs").click(function(f){var c=jQuery(this).data("name");if(c){var d=[];b=jQuery("input[name="+c+"]").filter(":checked").each(function(g,e){d.push(jQuery(this).val())});if(d.length>0){jQuery.use("gather",function(){a.like(d.join(","))})}else{jQuery.message("请选择喜欢的歌曲！")}}f.preventDefault()})});jQuery(function(){var b=null;var a=new LikeSong();a.addEventListener(LikeSongEvent.UNLIKE,function(c){b.each(function(){jQuery(this).parents(".song:first").remove()})});jQuery(".unlike-songs").click(function(f){var c=jQuery(this).data("name");if(c){var d=[];b=jQuery("input[name="+c+"]").filter(".songlist :checkbox:checked").each(function(g,e){d.push(jQuery(this).val())});if(d.length>0){jQuery.confirm({message:'您确定移除选中的歌曲吗？<small class="gray">(它们将不再出现在喜欢列表中)</small>',modal:true,callback:function(){jQuery.use("gather",function(){a.unlike(d.join(","))});return true}})}else{jQuery.message("请选择想要移除的歌曲！")}}f.preventDefault()})});jQuery(function(){var a=new LikeSong();jQuery(".actions.widget .like").live("click",function(){var d=jQuery(this);var b=d.parents(".actions.widget");if(b.size()==0||!b.data("music")){return}var c=b.data("music");if(d.is(".ilike")){a.unlike(c);d.removeClass("ilike")}else{a.like(c);d.addClass("ilike")}});jQuery(".actions.widget .gather").live("click",function(){var d=jQuery(this);var b=d.parents(".actions.widget");if(b.size()==0||!b.data("music")){return}var c=b.data("music");jQuery.use("gather",function(){gather(c)})});jQuery(".actions.widget .share").live("click",function(){var d=jQuery(this);var b=d.parents(".actions.widget");if(b.size()==0||!b.data("music")){return}var c=b.data("music");jQuery.use("share",function(){share(c)})});jQuery(".share").live("click",function(){var c=jQuery(this);var b=c.data("meta")||c.data("resource");if(b){jQuery.use("share",function(){share(b)})}return false});jQuery(".reproduce").live("click",function(){var c=jQuery(this);var b={resource:c.data("resource"),owner:c.data("owner")};if(b){jQuery.use("reproduce",function(){reproduce(b)})}return false});jQuery("form").submit(function(){var b=this;setTimeout(function(){jQuery(":submit",b).attr("disabled",true)},50);setTimeout(function(){jQuery(":submit",b).removeAttr("disabled")},1000)})});jQuery(function(){DevelopperTools=function(){this.messageBoard=jQuery('            <div id="developperwrapper" style="position: fixed;top: 20%;font-size: 13px;right: 20%;width: 60%;min-height: 40%;background: white;padding: 1%; z-index:101; box-shadow: 0 0 40px; ">                <h1>                    美乐｜开发人员工具                    <div class="fr">                        <a onclick="newconsole.toggle() ;" class="ml5">(x)</a>                    </div>                </h1>                <pre><i>*再次按下“shift + ·”键（这个键在键盘上1的左边）即可让我消失～ </i></pre>                <content style="color: #999 ;">                    <div class="m20">                        <h2>记录                            <p class="fr mr10">                                <a onclick="newconsole._l() ;" class="ml5">(+公共数据)</a>                                　|　查询：window.<input type="text" id="search_input">                                <button id="search_btn">打印</button>                                <button id="search_clr_btn">清空查询</button>                                　|　<a id="dt_cpy" class="ml5">(复制)</a>                                <a onclick="newconsole.show() ;" class="ml5">(刷新)</a>                                <a onclick=\'jQuery("#developpertools").html("")\'>(×清空记录)</a>                            </p>                        </h2>                        <ol id="developpertools" style="width:100% ; white-space: nowrap; text-indent: 2em; line-height: 2.5em; max-height: 21em; overflow-y: scroll; box-shadow: inset 0 0 10px; list-style: decimal inside none; padding: 20px 0; margin:10px 0;" ></ol>                        <i>*　暂不支持函数的打印及函数调用结果的打印。</i>                        <i>*　记录是逆向输出的。</i>                    </div>                    <div class="m20">                        <h2>样式                            <p class="fr mr10">                                <a onclick=\'jQuery("#developperwrapper style").append("img{outline:1px dashed #F00!important;}")\' class="ml5">(+img线框)</a>                                <a onclick=\'jQuery("#developperwrapper style").append("div,p,section,footer,header{outline:1px dashed rgba(0,0,0,0.5)!important;}")\' class="ml5">(+div线框)</a>                                <a onclick=\'jQuery("#developperwrapper style").html("")\' class="ml5">(×清空样式)</a>                            </p>                        </h2>                        <style id="visible_style" contenteditable style="color: rgb(111, 255, 151);white-space: normal;display: block;padding: 10px 15px;line-height: 2em;box-shadow: inset 0 0 10px #FFF;min-height: 2em;background: #333;margin: 10px 0;letter-spacing: 1px; font-weight: bold;"></style>                        <i>*　为了保证样式被正常的解析，请勿在上面回车哟。</i>                    </div>                </content>            </div>');this.messages=[];this.shown=false;this.reps={"\t":function(a){return jQuery("<label style='display:inline-block; width : 1em;'></label>").prepend(a).get(0).outerHTML},"http://[^s]+":function(a){return jQuery('<a target="_blank"></a>').prepend(a).attr("href",a).get(0).outerHTML}};this.colors=(function(){var c=[];var b=["user","USERINFO","localStorage","name","id","player","浏览器信息","admin","页面","地址栏","甜品","函数","真","假","没定义","Object","singletonPandora","parameter","CrossInvoking","错误提示","记录器"];for(i=0;i<b.length;i++){c.push({reg:new RegExp(b[i],"g"),keyword:b[i],color:"rgb("+a(0,200)+","+a(0,200)+","+a(0,200)+")"})}return c;function a(e,d){return parseInt(Math.random()*(d-e+1)+e)}})();this.inited=false};DevelopperTools.prototype={check:function(){return typeof(isLiveAdmin)!="undefined"&&isLiveAdmin},show:function(d){if(typeof WwwAdmin!=="function"){return this}if(!this.inited){var b=this;jQuery("body").prepend(b.messageBoard);if(jQuery("body").is(".player")){var e=jQuery("#dt_cpy").parent();jQuery("#visible_style").keydown(function(h){return});var f=jQuery('<a class="ml5">(+当前播放)</a>').click(function(){newconsole.print("player.currentTrack")});e.prepend(f);f=jQuery('<a class="ml5">(+logger)</a>').click(function(){newconsole.print("userActionLog")});e.prepend(f)}jQuery("#dt_cpy").zclip({copy:function(){return jQuery("#developpertools").parent().html()},afterCopy:function(){jQuery.message("链接已经拷贝到剪贴板")}});jQuery("#search_btn").click(function(){b.print(jQuery("#search_input").val())});jQuery("#search_clr_btn").click(function(){jQuery("#search_input").val("")});this.inited=true}else{this.history=jQuery("#developperwrapper")}var a=d||"";$DTPanel=jQuery("#developpertools").empty();for(var c=0;c<this.messages.length;c++){var g=this.messages[c];if(g.lastIndexOf(a)>0){$DTPanel.prepend("<li>"+g+"</li>")}}this.messageBoard.show();this.shown=true;return this},log:function(c,b){if(!this.check()){return this}var a=b?b.toString():"";switch(typeof c){case"string":this.logS(c,a);break;case"function":this.logS("函数",a);break;case"boolean":this.logS((c?"真":"假"),a);break;case"number":this.logS(c.toString(),a);break;case"array":case"object":this.logO(c,a);break;default:this.logS("没定义",a);break}return this},logS:function(e,a){if(!this.check()){return this}var c=e?e.toString():"";var g=a||"";g+="\t";if(window.console){console.log(g+c)}c=g+c;for(var d=0;d<this.colors.length;d++){var h=this.colors[d];c=c.replace(h.reg,'<a style="color:'+h.color+'" onclick="newconsole.show(\''+h.keyword+"')\"><b>"+h.keyword+"</b></a>")}var b=this;for(var f in this.reps){c=c.replace(new RegExp(f,"g"),this.reps[f])}this.messages.push(c);if(this.shown){this.show()}return this},logO:function(b,a){if(!this.check()){return this}var d=a||"";var e=b||{};if(b instanceof jQuery){}for(var c in e){var f=e[c];if(!isNaN(parseInt(c))&&typeof f==="string"&&((theIndex=f.indexOf("="))>0)){this.logS(f.substring(0,theIndex)+"\t"+f.substring(theIndex+1),d)}else{if(typeof f!=="function"){this.logS(c+"\t"+f,d)}}}return this},_l:function(){this.logO(document.cookie.split(";"),"甜品").logO(jQuery.browser,"浏览器信息").logO(USERINFO,"USERINFO").logO(localStorage,"localStorage").logS(jQuery("body").attr("class"),"页面").logS(window.location.href,"地址栏");return this},print:function(b){var c=b?b.toString():"";var d=c.split(".");var e=window;var a=0;do{e=e[d[a]];a++}while(e!==undefined&&e!==window&&a<d.length);if(e!==undefined&&e!==window){this.log(e,c);jQuery.message("查询成功！")}else{this.logS("没定义",c);jQuery.message("查询失败。")}return this},toggle:function(){if(this.shown){this.messageBoard.hide();this.shown=false}else{this.show()}return this}};window.newconsole=new DevelopperTools();if(typeof(isLiveAdmin)!="undefined"&&isLiveAdmin){jQuery.use("wwwadmin",function(){var a=new WwwAdmin()});jQuery.use("zclip");jQuery(document).keypress(function(a){if(a.which===126&&a.shiftKey){newconsole.toggle()}})}});